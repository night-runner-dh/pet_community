<div class = "container mt-5 mr-5" >
<div class = "col mx-auto">

<%= link_to '戻る', 'javascript:history.back()', class: "mr-4" %>
 <% if @post.user == current_user %>
    <%= link_to '編集する', edit_public_post_path(@post.id), class: "btn  btn-success mr-4" %>
    <%= link_to "削除", public_post_path(@post), class: "btn alert-danger", method: :delete, data: { confirm: "本当に削除しますか？" } %>
 <% end %>
<div>
  <%if @post.image.present? %>
   <%= image_tag @post.image, size: "400x400" %>
  <% end %>
  <p>タイトル：<%= @post.title %></p>
  <p>説明：<%= @post.body %></p>
  <p>投稿ユーザー画像：<%#= image_tag @post_image.user.get_profile_image(100,100) %></p>
  <p>ユーザーネーム：<%= @post.user.name %></p>
  <p>投稿日：<%= @post.created_at.strftime('%Y/%m/%d') %></p>
 
 
  <% if current_user %>
    <% if @post.favorited?(current_user) %>
      <p>
        <%= link_to public_post_favorites_path(@post), method: :delete do %>
          ♥<%= @post.favorites.count %> いいね
        <% end %>
      </p>
    <% else %>
      <p>
        <%= link_to public_post_favorites_path(@post), method: :post do %>
          ♡<%= @post.favorites.count %> いいね
        <% end %>
      </p>
    <% end %>
  <% else %>
    <p>
      ♥<%= @post.favorites.count %> いいね
    </p>
  <% end %>
</div>

<div>
 <p>コメント件数:<%= @post.post_comments.count %></p>
 <% @post.post_comments.each do |post_comment| %>
   <p><%#= image_tag post_comment.user.get_profile_image(100,100) %></p>
   <p><%= post_comment.comment %></p>
   by <%= post_comment.user.name %>
   <%= post_comment.created_at.strftime('%Y/%m/%d') %>
  <% if post_comment.user == current_user %>
  <%= button_to "コメント削除", public_post_post_comments_path(post_comment.id), method: :delete %>
  <% end %>
 <% end %>
</div>
<div>
  <% if current_user %>
  <%= form_with url: public_post_post_comments_path(@post) do |f| %>
    <%= f.text_area :comment, rows: '5', placeholder: "コメントは、ここに入力してください" %>
    <%= f.submit "送信する" %>
  <% end %>
<% end %>
</div>

</div>
</div>